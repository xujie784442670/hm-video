# 项目模块

| 序号 | 模块                        | 描述         | 作用                                           | 优先级 | 响应码范围  |
| ---- | --------------------------- | ------------ | ---------------------------------------------- | ------ | ----------- |
| 1    | video-commons               | 公共模块     | 存放所有模块都需要用的类,且不依赖任何第三方jar | 1      | 1-9999      |
| 2    | video-gateway               | 网关模块     | 整合后端所有服务的API,对前端提供统一接口调用   | 6      | 1-9999      |
| 3    | video-admin                 | 监控模块     | 对所有的服务器提供监控能力                     | 7      | 1-9999      |
| 4    | account-server              | 账号模块     | 提供账号,角色,权限的功能接口                   | 2      | 10000-10099 |
| 5    | video-interactions-server   | 视频交互模块 | 提供收藏,弹幕,评论,点赞,举报的功能接口         | 4      | 10100-10199 |
| 6    | statistics-server           | 统计模块     | 提供各项数据的统计功能接口                     | 5      | 10200-10299 |
| 7    | email-server                | 邮件服务     | 提供邮件相关的功能接口                         | 2      | 10300-10399 |
| 8    | account-interactions-server | 账号交互模块 | 提供关注的功能接口                             | 4      | 10400-10499 |
| 9    | im-server                   | 即时通讯模块 | 提供即时通讯接口                               | 5      | 10500-10599 |
| 10   | play-record-server          | 播放记录模块 | 提供播放记录功能接口                           | 4      | 10600-10699 |
| 11   | upload-server               | 文件上传模块 | 提供文件上传模块                               | 3      | 10700-10799 |
| 12   | video-server                | 视频模块     | 提供视频,视频类型查询服务                      | 3      | 10800-10899 |

# 账号模块

## 登录功能

>  请求地址: /login

### 参数

#### Params

| 参数名 | 默认值 | 类型   | 是否必传 | 描述                                |
| ------ | ------ | ------ | -------- | ----------------------------------- |
| type   |        | number | 是       | 登录类型: 0-账号密码登录,1-邮箱登录 |

#### Body

| 参数名   | 默认值 | 类型   | 是否必传 | 描述   | 验证规则 |
| -------- | ------ | ------ | -------- | ------ | -------- |
| username |        | string | 是       | 用户名 |          |
| password |        | string | 是       | 密码   |          |

```json
{
    "username":"admin",
    "password":"123"
}
```

### 响应

```json
{
    "code":10000,  // 响应码
    "message":"成功", // 描述
    // 返回的数据
    "data":{
        // 用户信息
        "user":{
            "username":"admin", // 用户名
            "email":"xxxx@xx.xx", // 邮箱
            "avatar":"xxxxxxx" ,//头像
            "nickName":"小王",//用户昵称
        },
        // 用户拥有的角色代码列表
        "roles":["account","video"],
        // 用户拥有的权限代码列表
        "permissions":["account:find"],
        // 用户登录的令牌
        "token":"xxxxxxxx"
    }
}
```

### 响应码描述

| 响应码   | 描述     |
|-------|--------|
| 0     | 表示成功   |
| 10001 | 账号密码错误 |
| 10002 | 验证码错误  |

## 注册功能
>  请求地址: /register

### 参数

#### Body

| 参数名     | 默认值 | 类型   | 是否必传 | 描述   | 验证规则 |
| ---------- | ------ | ------ | -------- | ------ | -------- |
| account   |        | Account | 是       | 用户对象 |          |

```json
{
    "username":"admin",
    "password":"123",
    "nickname":"小王",
    "verifyCode":"4396",
    "email":"xxxx@xx.xx",
}
```
### 响应

```json
{
    "code":10010,  // 响应码
    "message":"成功", // 描述
    
}
```

### 响应码描述

| 响应码 | 描述               |
| ------ | ------------------ |
| 10010  | 表示注册成功       |
| 10011  | 验证码错误         |
| 10012  | 用户名或邮箱已存在 |
## 封禁账号功能

>  请求地址: /logicDeleteAccount

### 参数
#### Body

| 参数名   | 默认值 | 类型   | 是否必传 | 描述   | 验证规则 |
| -------- | ------ | ------ | -------- | ------ | -------- |
| id |        | Long | 是       | 用户id |          |

```json
{
    "id":"1"
}
```

### 响应

```json
{
    "code":10020,  // 响应码
    "message":"封禁成功", // 描述
    // 返回的数据
    }
}
```

### 响应码描述

| 响应码 | 描述         |
| ------ | ------------ |
| 10020  | 表示封禁成功 |
| 10021  | 表示封禁失败 |
## 查询用户功能

>  请求地址: /findDeatil

### 参数
#### Body

| 参数名   | 默认值 | 类型   | 是否必传 | 描述   | 验证规则 |
| -------- | ------ | ------ | -------- | ------ | -------- |
| id |        | Long | 是       | 用户id |          |

```json
{
    "id":"1"
}
```

### 响应

```json
{
    "code":10030,  // 响应码
    "message":"查询成功", // 描述
    // 返回的数据
    "data":{
        // 用户信息
        "user":{
        	"id":"1",//用户id
            "username":"admin", // 用户名
            "nickName":"小王",//用户昵称
            "avatar":"",//用户头像地址
            "email":"xxxx@xx.xx" // 邮箱
        }
    }
    }
}
```

### 响应码描述

| 响应码 | 描述         |
| ------ | ------------ |
| 10030  | 表示查询成功 |
| 10031  | 表示查询失败 |
## 查询用户总点赞，总关注，总粉丝功能

>  请求地址: /findDeatil

### 参数
#### Body

| 参数名   | 默认值 | 类型   | 是否必传 | 描述   | 验证规则 |
| -------- | ------ | ------ | -------- | ------ | -------- |
| id |        | Long | 是       | 用户id |          |

```json
{
    "id":"1"
}
```

### 响应

```json
{
    "code":10040,  // 响应码
    "message":"查询成功", // 描述
    // 返回的数据
    "data":{
        "numberoflikes":"200",//总点赞数
        "focus":"15",//总关注数
        "fans:"12",//总粉丝数
    }
    }
}
```

### 响应码描述

| 响应码 | 描述         |
| ------ | ------------ |
| 10040  | 表示查询成功 |
| 10041  | 表示查询失败 |
## 查询第二个用户是不是第一个用户粉丝功能

>  请求地址: /findstatus

### 参数
#### Body

| 参数名   | 默认值 | 类型   | 是否必传 | 描述   | 验证规则 |
| -------- | ------ | ------ | -------- | ------ | -------- |
| userId |        | Long | 是       | 用户id |          |
| user2Id |        | Long | 是       | 用户2id |          |

```json
{
    "userId":"1",
    "user2Id":"2"
}
```

### 响应

```json
{
    "code":10050,  // 响应码
    "message":"查询成功", // 描述
    // 返回的数据
    "data":"1" // 1：第二个用户是第一个用户粉丝 2：第二个用户不是第一个用户粉丝
    }
}
```
### 响应码描述

| 响应码 | 描述         |
| ------ | ------------ |
| 10050  | 表示查询成功 |
| 10051  | 表示查询失败 |
## 修改密码功能

>  请求地址: /updatePassword

### 参数
#### Body

| 参数名   | 默认值 | 类型   | 是否必传 | 描述   | 验证规则 |
| -------- | ------ | ------ | -------- | ------ | -------- |
| account |        | Account | 是       | 用户对象 |          |
```json
{
    "username":"admin",
    "password":"123",
    "nickname":"小王",
    "verifyCode":"4396",
    "email":"xxxx@xx.xx",
}
```
### 响应

```json
{
    "code":10060,  // 响应码
    "message":"密码修改成功", // 描述
    // 返回的数据
    
}
```
### 响应码描述

| 响应码 | 描述         |
| ------ | ------------ |
| 10060  | 密码修改成功 |
| 10061  | 密码修改失败 |
## 修改昵称功能

>  请求地址: /updateNickname

### 参数
#### Body

| 参数名   | 默认值 | 类型   | 是否必传 | 描述   | 验证规则 |
| -------- | ------ | ------ | -------- | ------ | -------- |
| account |        | Account | 是       | 用户对象 |          |

```json
{
    "username":"admin",
    "password":"123",
    "nickname":"小王",
    "verifyCode":"4396",
    "email":"xxxx@xx.xx",
}
```
### 响应

```json
{
    "code":10070,  // 响应码
    "message":"昵称修改成功", // 描述
    // 返回的数据
    
}
```
### 响应码描述

| 响应码 | 描述         |
| ------ | ------------ |
| 10070  | 密码昵称成功 |
| 10071  | 密码昵称失败 |
## 修改邮箱功能

>  请求地址: /updateEmail

### 参数
#### Body

| 参数名   | 默认值 | 类型   | 是否必传 | 描述   | 验证规则 |
| -------- | ------ | ------ | -------- | ------ | -------- |
| account |        | Account | 是       | 用户对象 |          |

```json
{
    "username":"admin",
    "password":"123",
    "nickname":"小王",
    "verifyCode":"4396",
    "email":"xxxx@xx.xx",
}
```

### 响应

```json
{
    "code":10080,  // 响应码
    "message":"邮箱修改成功", // 描述
    // 返回的数据
    
}
```
### 响应码描述

| 响应码 | 描述     |
| ------ |--------|
| 10080  | 邮箱修改成功 |
| 10081  | 邮箱修改失败 |
